require 'rubygems'
require 'sinatra'
require 'sinatra/simple-navigation'
require 'haml'
require 'flickraw'

set :haml, :format => :html5

module Ewb
  class App < Sinatra::Base
    register Sinatra::SimpleNavigation
    
    get '/' do
      haml :index
    end
    
    get '/events' do
      haml :events
    end
    
    get '/projects' do
      haml :projects
    end
    
    get '/media' do
      FlickRaw.api_key="f3dfc1d63e20a61e6f216aba31d9dc42"
      FlickRaw.shared_secret="5d5d1830c0cb02ad"

      list   = flickr.photos.getRecent

      id     = list[0].id
      secret = list[0].secret
      info = flickr.photos.getInfo :photo_id => id, :secret => secret
      puts info.title
      
      haml :media
    end
    
    get '/support' do
      haml :support
    end
    
  end
end
